# itmo-containers
## lab 3

1) Важен ли порядок выполнения манифестов?

Да, порядок выполнения манифестов важен:

В Kubernetes многие ресурсы зависят друг от друга. Например:

Поды могут зависеть от сервисов для связи с другими компонентами.
Контейнеры в подах могут использовать значения из конфигурационных объектов, таких как ConfigMap или Secret.
Если зависимый ресурс создается до того, как созданы необходимые для него ресурсы, это приведет к ошибкам или некорректной работе.

2) Вопрос: что (и почему) произойдет, если отскейлить количество реплик postgres-deployment в 0, затем обратно в 1, после чего попробовать снова зайти на Nextcloud?

При попытке зайти повторно на Nextcloud получаем ошибку internal server error. Причина в отсутствии персистентного хранилища для базы данных PostgreSQL. Когда мы масштабируем до 0 все поды PG удаляются, данные из БД пропадают. Когда мы возвращаем postgres до 1 Kubernetes создает новый чистый под с пустой БД, из-за чего nextcloud не находит данные и выдает ошибку. Для исправления этой проблемы можно настроить персистентное хранилище для PostgreSQL.

